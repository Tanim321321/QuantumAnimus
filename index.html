if(userData.lastClaim === 0 || timeDiff >= 10800) { // 3 hours = 10800 seconds
                claimBtn.disabled = false;
                claimBtn.textContent = Claim ${levelRewards[userData.level]} Points;
            } else {
                claimBtn.disabled = true;
            }
        }
        
        // ক্লেইম পয়েন্ট
        function claimPoints() {
            const currentTime = Math.floor(Date.now() / 1000);
            
            // ৩ ঘন্টার টাইমার চেক
            if(userData.lastClaim !== 0 && (currentTime - userData.lastClaim) < 10800) {
                alert('Please wait until the timer completes!');
                return;
            }
            
            // পয়েন্ট যোগ
            userData.points += levelRewards[userData.level];
            userData.lastClaim = currentTime;
            
            // ডেটা সেভ
            localStorage.setItem('userData', JSON.stringify(userData));
            
            // UI আপডেট
            updateUI();
            startTimer();
            
            alert(Successfully claimed ${levelRewards[userData.level]} points!);
        }
        
        // টাইমার ফাংশন
        function startTimer() {
            const timerElement = document.getElementById('timer');
            const claimBtn = document.getElementById('claimBtn');
            
            const timerInterval = setInterval(() => {
                const currentTime = Math.floor(Date.now() / 1000);
                const timeDiff = currentTime - userData.lastClaim;
                const remainingTime = 10800 - timeDiff;
                
                if(remainingTime <= 0) {
                    clearInterval(timerInterval);
                    timerElement.textContent = 'Ready to claim!';
                    claimBtn.disabled = false;
                    return;
                }
                
                // সময় ফরম্যাট
                const hours = Math.floor(remainingTime / 3600);
                const minutes = Math.floor((remainingTime % 3600) / 60);
                const seconds = remainingTime % 60;
                
                timerElement.textContent = Next claim in: ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')};
            }, 1000);
        }
        
        // লেভেল আপগ্রেড
        function upgradeLevel(targetLevel) {
            const cost = levelCosts[targetLevel];
            
            // চেক লেভেল
            if(userData.level !== targetLevel - 1) {
                alert(You need to be at level ${targetLevel - 1} to upgrade to level ${targetLevel});
                return;
            }
            
            // চেক পয়েন্ট
            if(userData.points < cost) {
                alert(You need ${cost - userData.points} more points to upgrade!);
                return;
            }
            
            // আপগ্রেড
            userData.points -= cost;
            userData.level = targetLevel;
            
            // ব্যকগ্রাউন্ড আপডেট
            document.getElementById('home').style.backgroundImage = url('background-level${targetLevel}.jpg');
            
            // ডেটা সেভ
            localStorage.setItem('userData', JSON.stringify(userData));
            
            // UI আপডেট
            updateUI();
            
            alert(Congratulations! Upgraded to level ${targetLevel});
        }
        
        // রেফারেল লিংক কপি
        function copyReferralLink() {
            const linkInput = document.getElementById('referralLink');
            linkInput.select();
            document.execCommand('copy');
            alert('Referral link copied to clipboard!');
        }
    </script>
</body>
</html>
